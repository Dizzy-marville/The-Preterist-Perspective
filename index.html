// === Initialization ===
initializeParticles(count) {
  for each particle:
    position = random within canvas
    velocity = random small vector
    lifespan = random duration
    color = base ambient hue
}

// === Frame Update ===
updateParticles(mousePos, time) {
  for each particle:
    // Flow Field Influence
    flowVector = calculateFlow(mousePos, particle.position)
    particle.velocity += flowVector * 0.05

    // Pull Logic (gentle orbit)
    pull = (mousePos - particle.position) * 0.02
    particle.velocity += pull

    // Time-Based Drift (ritual breath)
    drift = <sin(time), cos(time)> * 0.01
    particle.velocity += drift

    // Motion Update
    particle.position += particle.velocity
    particle.velocity *= 0.95 // damping for silence

    // Visual Consequence
    particle.color = updateColorByZone(particle.position, mousePos)
    particle.opacity = fadeByLifespan(particle.lifespan)

    // Ritual Reset
    if particle.lifespan expired:
      resetParticle(particle)
}

// === Flow Field Calculation ===
calculateFlow(center, pos) {
  direction = normalize(pos - center)
  perpendicular = rotate90(direction)
  return perpendicular * sin(distance(center, pos) * 0.1)
}

// === Color Zones ===
updateColorByZone(pos, center) {
  d = distance(pos, center)
  if d < innerThreshold: return pale glow
  else if d < middleThreshold: return soft hue
  else: return fading ember
}

// === Particle Reset ===
resetParticle(p) {
  p.position = random edge
  p.velocity = random small vector
  p.lifespan = new random duration
}
